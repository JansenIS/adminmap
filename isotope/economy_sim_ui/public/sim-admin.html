<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Isotope Economy — Sim Admin</title>
  <link rel="stylesheet" href="./sim-admin.css" />
</head>
<body>
  <div class="layout">
    <aside class="panel">
      <h1>Админка симулятора</h1>
      <p class="muted">Синхронизировано с adminmap. Выбери провинцию на карте и измени параметры.</p>

      <div class="block">
        <label>Размер точки по параметру</label>
        <select id="metricSelect">
          <option value="effectiveGDP">Эффективный ВВП</option>
          <option value="population">Население</option>
          <option value="infra">Инфраструктура</option>
          <option value="gdpTurnover">Обычный ВВП</option>
        </select>
      </div>

      <div class="block">
        <div class="kvs">
          <div>PID: <b id="selPid">—</b></div>
          <div>Название: <b id="selName">—</b></div>
          <div>Террейн: <b id="selTerrain">—</b></div>
        </div>
      </div>

      <div class="block form" id="editor" hidden>
        <label>Население</label>
        <input id="inputPop" type="number" min="1" step="1" />

        <label>Инфраструктура</label>
        <input id="inputInfra" type="number" min="0.1" max="2.5" step="0.01" />

        <label>Коэффициент ВВП</label>
        <input id="inputGdpWeight" type="number" min="0.05" max="8" step="0.01" />

        <label>Здания в провинции</label>
        <div id="buildingRows" class="buildingRows"></div>
        <div class="buildingAddRow">
          <select id="buildingTypeSelect"></select>
          <button id="btnAddBuilding" type="button">Добавить здание</button>
        </div>

        <button id="btnSave" type="button">Сохранить в симулятор</button>
      </div>

      <div id="saveStatus" class="muted"></div>
    </aside>

    <main class="mapWrap">
      <div class="tabs" role="tablist" aria-label="Просмотры sim-admin">
        <button id="tabBtnMap" class="tabBtn active" type="button" data-tab="map" role="tab" aria-selected="true">Карта</button>
        <button id="tabBtnTreasury" class="tabBtn" type="button" data-tab="treasury" role="tab" aria-selected="false">Казна провинций</button>
      </div>

      <section id="tabMap" class="tabPanel active" role="tabpanel">
        <canvas id="mapCanvas" width="1898" height="2048"></canvas>
      </section>

      <section id="tabTreasury" class="tabPanel" role="tabpanel" hidden>
        <div class="tableWrap">
          <table class="treasuryTable">
            <thead>
              <tr>
                <th><button type="button" class="sortBtn" data-sort-key="pid">PID</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="name">Провинция</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="treasury">Казна</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="treasuryNetYear">Чистый баланс/год</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="treasuryTradeTaxYear">Торговые налоги/год</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="treasuryTransitYear">Транзит/год</button></th>
                <th><button type="button" class="sortBtn" data-sort-key="treasuryExpenseYear">Расходы/год</button></th>
              </tr>
            </thead>
            <tbody id="treasuryTableBody"></tbody>
          </table>
        </div>
      </section>

      <div id="tooltip" class="tooltip"></div>
    </main>
  </div>

  <script type="module" src="./sim-admin.js"></script>
</body>
</html>
